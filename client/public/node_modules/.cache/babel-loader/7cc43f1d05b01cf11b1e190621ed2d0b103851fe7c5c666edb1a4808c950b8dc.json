{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\LENOVO\\\\Inventory_project\\\\client\\\\src\\\\components\\\\Products\\\\Products.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { HiPlus, HiSearch, HiQrcode, HiPencil, HiTrash, HiEye } from 'react-icons/hi';\nimport axios from 'axios';\nimport toast from 'react-hot-toast';\nimport ProductModal from './ProductModal';\nimport ProductDetailModal from './ProductDetailModal';\nimport BarcodeScanner from './BarcodeScanner';\nimport LoadingSpinner from '../UI/LoadingSpinner';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Products = () => {\n  _s();\n  const [products, setProducts] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showModal, setShowModal] = useState(false);\n  const [showDetailModal, setShowDetailModal] = useState(false);\n  const [showScanner, setShowScanner] = useState(false);\n  const [selectedProduct, setSelectedProduct] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [currentPage] = useState(1);\n  const [totalPages] = useState(1);\n\n  // Fetch real categories and suppliers from backend\n  const [categories, setCategories] = useState([]);\n  const [suppliers, setSuppliers] = useState([]);\n  const fetchProducts = useCallback(async () => {\n    try {\n      var _res$data, _res$data2;\n      setLoading(true);\n      const params = new URLSearchParams({\n        page: currentPage,\n        limit: 10,\n        search: searchTerm\n      });\n      const res = await axios.get(`/api/products?${params}`);\n      const list = ((_res$data = res.data) === null || _res$data === void 0 ? void 0 : _res$data.products) || ((_res$data2 = res.data) === null || _res$data2 === void 0 ? void 0 : _res$data2.data) || [];\n      setProducts(list);\n    } catch (error) {\n      toast.error('Failed to fetch products');\n      console.error('Error fetching products:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [currentPage, searchTerm]);\n  useEffect(() => {\n    fetchProducts();\n  }, [fetchProducts]);\n  useEffect(() => {\n    const fetchCategories = async () => {\n      try {\n        const res = await axios.get('/api/categories');\n        setCategories(res.data);\n      } catch {\n        toast.error('Failed to load categories');\n      }\n    };\n    const fetchSuppliers = async () => {\n      try {\n        const res = await axios.get('/api/suppliers');\n        setSuppliers(res.data);\n      } catch {\n        toast.error('Failed to load suppliers');\n      }\n    };\n    fetchCategories();\n    fetchSuppliers();\n  }, []);\n  const handleAddProduct = () => {\n    setSelectedProduct(null);\n    setShowModal(true);\n  };\n  const handleEditProduct = product => {\n    setSelectedProduct(product);\n    setShowModal(true);\n  };\n  const handleViewProduct = product => {\n    setSelectedProduct(product);\n    setShowDetailModal(true);\n  };\n  const handleDeleteProduct = async id => {\n    if (!window.confirm('Are you sure you want to delete this product?')) return;\n    try {\n      await axios.delete(`/api/products/${id}`);\n      toast.success('Product deleted');\n      fetchProducts();\n    } catch {\n      toast.error('Failed to delete product');\n    }\n  };\n  const handleProductSaved = () => {\n    setShowModal(false);\n    fetchProducts();\n    toast.success('Product saved');\n  };\n  const handleBarcodeScan = async barcode => {\n    try {\n      const res = await axios.post('/api/barcodes/scan', {\n        barcode\n      });\n      setSelectedProduct(res.data);\n      setShowDetailModal(true);\n      setShowScanner(false);\n      toast.success('Product found');\n    } catch {\n      toast.error('Product not found');\n    }\n  };\n  if (loading) return /*#__PURE__*/_jsxDEV(LoadingSpinner, {\n    size: \"lg\",\n    className: \"h-64\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 23\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6\",\n    children: [showModal && /*#__PURE__*/_jsxDEV(ProductModal, {\n      product: selectedProduct,\n      categories: categories,\n      suppliers: suppliers,\n      onClose: () => setShowModal(false),\n      onSaved: handleProductSaved\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 9\n    }, this), showDetailModal && /*#__PURE__*/_jsxDEV(ProductDetailModal, {\n      product: selectedProduct,\n      onClose: () => setShowDetailModal(false)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 9\n    }, this), showScanner && /*#__PURE__*/_jsxDEV(BarcodeScanner, {\n      onClose: () => setShowScanner(false),\n      onScan: handleBarcodeScan\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 5\n  }, this);\n};\n_s(Products, \"DE4IuDjYodfCPwcZ3yR3a7MWyE0=\");\n_c = Products;\nexport default Products;\nvar _c;\n$RefreshReg$(_c, \"Products\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","HiPlus","HiSearch","HiQrcode","HiPencil","HiTrash","HiEye","axios","toast","ProductModal","ProductDetailModal","BarcodeScanner","LoadingSpinner","jsxDEV","_jsxDEV","Products","_s","products","setProducts","loading","setLoading","showModal","setShowModal","showDetailModal","setShowDetailModal","showScanner","setShowScanner","selectedProduct","setSelectedProduct","searchTerm","setSearchTerm","currentPage","totalPages","categories","setCategories","suppliers","setSuppliers","fetchProducts","_res$data","_res$data2","params","URLSearchParams","page","limit","search","res","get","list","data","error","console","fetchCategories","fetchSuppliers","handleAddProduct","handleEditProduct","product","handleViewProduct","handleDeleteProduct","id","window","confirm","delete","success","handleProductSaved","handleBarcodeScan","barcode","post","size","className","fileName","_jsxFileName","lineNumber","columnNumber","children","onClose","onSaved","onScan","_c","$RefreshReg$"],"sources":["C:/Users/LENOVO/Inventory_project/client/src/components/Products/Products.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\r\nimport { HiPlus, HiSearch, HiQrcode, HiPencil, HiTrash, HiEye } from 'react-icons/hi';\r\nimport axios from 'axios';\r\nimport toast from 'react-hot-toast';\r\nimport ProductModal from './ProductModal';\r\nimport ProductDetailModal from './ProductDetailModal';\r\nimport BarcodeScanner from './BarcodeScanner';\r\nimport LoadingSpinner from '../UI/LoadingSpinner';\r\n\r\nconst Products = () => {\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  const [showModal, setShowModal] = useState(false);\r\n  const [showDetailModal, setShowDetailModal] = useState(false);\r\n  const [showScanner, setShowScanner] = useState(false);\r\n\r\n  const [selectedProduct, setSelectedProduct] = useState(null);\r\n\r\n  const [searchTerm, setSearchTerm] = useState('');\r\n  const [currentPage] = useState(1);\r\n  const [totalPages] = useState(1);\r\n\r\n  // Fetch real categories and suppliers from backend\r\n  const [categories, setCategories] = useState([]);\r\n  const [suppliers, setSuppliers] = useState([]);\r\n\r\n  const fetchProducts = useCallback(async () => {\r\n    try {\r\n      setLoading(true);\r\n      const params = new URLSearchParams({\r\n        page: currentPage,\r\n        limit: 10,\r\n        search: searchTerm,\r\n      });\r\n      const res = await axios.get(`/api/products?${params}`);\r\n      const list = res.data?.products || res.data?.data || [];\r\n      setProducts(list);\r\n    } catch (error) {\r\n      toast.error('Failed to fetch products');\r\n      console.error('Error fetching products:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  }, [currentPage, searchTerm]);\r\n\r\n  useEffect(() => {\r\n    fetchProducts();\r\n  }, [fetchProducts]);\r\n\r\n  useEffect(() => {\r\n    const fetchCategories = async () => {\r\n      try {\r\n        const res = await axios.get('/api/categories');\r\n        setCategories(res.data);\r\n      } catch {\r\n        toast.error('Failed to load categories');\r\n      }\r\n    };\r\n\r\n    const fetchSuppliers = async () => {\r\n      try {\r\n        const res = await axios.get('/api/suppliers');\r\n        setSuppliers(res.data);\r\n      } catch {\r\n        toast.error('Failed to load suppliers');\r\n      }\r\n    };\r\n\r\n    fetchCategories();\r\n    fetchSuppliers();\r\n  }, []);\r\n\r\n  const handleAddProduct = () => {\r\n    setSelectedProduct(null);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleEditProduct = (product) => {\r\n    setSelectedProduct(product);\r\n    setShowModal(true);\r\n  };\r\n\r\n  const handleViewProduct = (product) => {\r\n    setSelectedProduct(product);\r\n    setShowDetailModal(true);\r\n  };\r\n\r\n  const handleDeleteProduct = async (id) => {\r\n    if (!window.confirm('Are you sure you want to delete this product?')) return;\r\n    try {\r\n      await axios.delete(`/api/products/${id}`);\r\n      toast.success('Product deleted');\r\n      fetchProducts();\r\n    } catch {\r\n      toast.error('Failed to delete product');\r\n    }\r\n  };\r\n\r\n  const handleProductSaved = () => {\r\n    setShowModal(false);\r\n    fetchProducts();\r\n    toast.success('Product saved');\r\n  };\r\n\r\n  const handleBarcodeScan = async (barcode) => {\r\n    try {\r\n      const res = await axios.post('/api/barcodes/scan', { barcode });\r\n      setSelectedProduct(res.data);\r\n      setShowDetailModal(true);\r\n      setShowScanner(false);\r\n      toast.success('Product found');\r\n    } catch {\r\n      toast.error('Product not found');\r\n    }\r\n  };\r\n\r\n  if (loading) return <LoadingSpinner size=\"lg\" className=\"h-64\" />;\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      {/* Existing UI components... */}\r\n\r\n      {showModal && (\r\n        <ProductModal\r\n          product={selectedProduct}\r\n          categories={categories}\r\n          suppliers={suppliers}\r\n          onClose={() => setShowModal(false)}\r\n          onSaved={handleProductSaved}\r\n        />\r\n      )}\r\n\r\n      {showDetailModal && (\r\n        <ProductDetailModal\r\n          product={selectedProduct}\r\n          onClose={() => setShowDetailModal(false)}\r\n        />\r\n      )}\r\n\r\n      {showScanner && (\r\n        <BarcodeScanner onClose={() => setShowScanner(false)} onScan={handleBarcodeScan} />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Products;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}